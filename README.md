# Oh My Git

一个VSCode插件，在Git历史记录中内联显示TXT文件内容，支持翻页阅读。

## 功能特性

- 🔍 **Git历史记录显示**: 在源代码管理器中显示Git提交历史
- 📖 **内联TXT阅读**: 在Git记录行内直接显示TXT文件内容
- 📄 **翻页功能**: 支持点击和键盘快捷键翻页
- ⚙️ **配置管理**: 可配置TXT文件路径和每页显示行数
- 🎯 **隐蔽阅读**: 看起来像普通的Git记录信息

## 安装

1. 克隆或下载此项目
2. 在项目根目录运行 `npm install`
3. 运行 `npm run compile` 编译项目
4. 在VSCode中打开项目文件夹
5. 按 `F5` 启动扩展开发主机（会自动打开新的VSCode窗口）
6. 在新窗口中测试插件功能

## 使用方法

### 基本使用

1. **配置TXT文件路径** (推荐方式):
   - 方法一：使用命令面板
     - 按 `Ctrl/Cmd + Shift + P` 打开命令面板
     - 输入 "Oh My Git: 配置TXT文件路径"
     - 选择TXT文件并确认
   
   - 方法二：通过设置
     - 打开VSCode设置 (Ctrl/Cmd + ,)
     - 搜索 "Oh My Git"
     - 设置 "TXT文件路径" 为你要阅读的文件路径

2. **查看Git历史记录**:
   - 在源代码管理器中找到 "Git历史记录" 视图
   - 标题栏提供完整的操作按钮组：📄 选择TXT文件、⬅️ 第一页、◀️ 上一页、▶️ 下一页、➡️ 最后一页、📄 跳转页面、👁️ 隐藏/显示、🔄 刷新配置
   - 点击"选择TXT文件"按钮快速配置要阅读的文件
   - 点击任意Git记录项开始阅读TXT内容
   - 如果未配置TXT文件路径，会提示配置

3. **翻页操作**:
   - **标题栏按钮**: 选择TXT文件、第一页、上一页、下一页、最后一页、跳转页面、隐藏/显示、搜索
   - **点击翻页**: 点击正在阅读的Git记录项
   - **键盘翻页**: 
     - `→` / `↓` 下一页
     - `←` / `↑` 上一页
   - **搜索功能**: 
     - `Alt + F` 搜索
     - `F3` 搜索下一处
     - `Shift + F3` 搜索上一处
   - **阅读进度**: 以TXT文件路径为key持久化保存，重启VSCode后自动恢复
   - **隐藏功能**: 点击隐藏按钮或使用快捷键 `Ctrl/Cmd + H` 可以隐藏所有TXT内容，恢复显示所有Git消息

4. **查看配置信息**:
   - 按 `Ctrl/Cmd + Shift + P` 打开命令面板
   - 输入 "Oh My Git: 显示配置信息"

### 配置选项

| 配置项 | 描述 | 默认值 |
|--------|------|--------|
| `ohmygit.txtFilePath` | TXT文件路径 | "" |
| `ohmygit.pageSize` | 每页显示字符数 | 30 |

### 快捷键

| 快捷键 | 功能 |
|--------|------|
| `→` / `↓` | 下一页 |
| `←` / `↑` | 上一页 |
| `Ctrl + H` / `Cmd + H` | 隐藏/显示TXT内容 |
| `Alt + F` | 搜索 |
| `F3` | 搜索下一处 |
| `Shift + F3` | 搜索上一处 |

### 命令

| 命令 | 功能 |
|------|------|
| `Oh My Git: 配置TXT文件路径` | 选择并配置TXT文件路径 |
| `Oh My Git: 显示配置信息` | 显示当前配置状态 |
| `Oh My Git: 显示Git历史记录` | 刷新Git历史记录 |
| `Oh My Git: 刷新配置` | 刷新配置并重新加载Git历史记录 |
| `Oh My Git: 第一页` | 跳转到第一页 |
| `Oh My Git: 最后一页` | 跳转到最后一页 |
| `Oh My Git: 跳转到页面` | 跳转到指定页码 |
| `Oh My Git: 隐藏/显示TXT内容` | 切换隐藏模式，显示所有Git消息 |
| `Oh My Git: 搜索` | 搜索TXT内容 |
| `Oh My Git: 搜索：上一处` | 搜索上一处匹配内容 |
| `Oh My Git: 搜索：下一处` | 搜索下一处匹配内容 |

## 开发

### 项目结构

```
src/
├── extension.ts           # 插件入口文件
├── gitHistoryProvider.ts  # Git历史记录提供者
├── txtContentManager.ts   # TXT内容管理器
├── inlineReader.ts        # 内联阅读器
├── keyboardHandler.ts     # 键盘事件处理
├── configManager.ts       # 配置管理
└── types/
    ├── gitTypes.ts        # Git相关类型定义
    └── readerTypes.ts     # 阅读器类型定义
```

### 开发命令

```bash
# 安装依赖
npm install

# 编译项目
npm run compile

# 监听文件变化并自动编译
npm run watch

# 运行测试
npm test

# 代码检查
npm run lint
```

## 技术栈

- **TypeScript**: 主要开发语言
- **VSCode Extension API**: 插件开发框架
- **simple-git**: Git操作库
- **Node.js fs**: 文件系统操作

## 注意事项

1. **文件编码**: 支持UTF-8、GBK、GB2312、Big5等编码格式
2. **文件大小**: 建议TXT文件不要过大，以免影响性能
3. **Git仓库**: 需要在Git仓库中才能正常显示历史记录
4. **权限**: 确保VSCode有读取TXT文件的权限

## 故障排除

### 常见问题

1. **Git历史记录不显示**
   - 确保当前工作区是Git仓库
   - 检查Git是否正确安装

2. **TXT文件无法读取**
   - 检查文件路径是否正确
   - 确保文件存在且有读取权限
   - 检查文件编码格式

3. **翻页功能不工作**
   - 确保已选择正在阅读TXT的Git记录项
   - 检查键盘快捷键是否被其他插件占用

### 日志查看

在VSCode开发者工具中查看控制台输出，插件会输出详细的日志信息。

## 贡献

欢迎提交Issue和Pull Request！

## 许可证

MIT License 